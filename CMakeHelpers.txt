cmake_minimum_required(VERSION 3.2.3 FATAL_ERROR)

set(danssfml_dir ${CMAKE_CURRENT_LIST_DIR})

function(danssfml)
	if(NOT TARGET sfml-system)
		set(BUILD_SHARED_LIBS_OUTER "${BUILD_SHARED_LIBS}")
		set(BUILD_SHARED_LIBS OFF)
		add_subdirectory("${danssfml_dir}/deps/SFML" "${CMAKE_CURRENT_BINARY_DIR}/danssfml")
		if(CMAKE_COMPILER_IS_GNUCC)
			target_compile_options(sfml-system   PRIVATE -fPIC)
			target_compile_options(sfml-window   PRIVATE -fPIC)
			target_compile_options(sfml-graphics PRIVATE -fPIC)
			target_compile_options(sfml-audio    PRIVATE -fPIC)
			target_compile_options(sfml-network  PRIVATE -fPIC)
		endif()
		set(BUILD_SHARED_LIBS "${BUILD_SHARED_LIBS_OUTER}")
		include_directories(
			"${danssfml_dir}/deps/SFML/include"
			"${danssfml_dir}"
		)
		add_definitions(-DSFML_STATIC)
	endif()
endfunction()
